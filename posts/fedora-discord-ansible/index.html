<!doctype html><html class=dark lang=en><head><meta charset=UTF-8><meta content="width=device-width,initial-scale=1.0" name=viewport><title>Moving to Fedora: Automating Discord Updates with Ansible</title><meta content="Moving to Fedora: Automating Discord Updates with Ansible" property=og:title><meta content="Because life's too short to manually update Discord every week." property=og:description><meta content="Because life's too short to manually update Discord every week." name=description><link href=https://svnscha.de/posts/fedora-discord-ansible/ rel=canonical><link href=/favicon.ico rel=icon type=image/png><link href=/apple-touch-icon.png rel=apple-touch-icon sizes=180x180><link href=/favicon-32x32.png rel=icon sizes=32x32 type=image/png><link href=/favicon-16x16.png rel=icon sizes=16x16 type=image/png><link href=/site.webmanifest rel=manifest><link href=https://svnscha.de/fonts.css rel=stylesheet><script>var _paq=window._paq=window._paq||[];_paq.push(['disableCookies']);_paq.push(['trackPageView']);_paq.push(['enableLinkTracking']);_paq.push(['enableHeartBeatTimer']);(function(){var a="//analytics.liasoft.de/";_paq.push(['setTrackerUrl',a+ 'matomo.php']);_paq.push(['setSiteId','27']);var b=document,c=b.createElement('script'),d=b.getElementsByTagName('script')[0];c.async=true;c.src=a+ 'matomo.js';d.parentNode.insertBefore(c,d)})()</script><link href=https://svnscha.de/atom.xml rel=alternate title=svnscha type=application/atom+xml><link href=https://svnscha.de/theme/dark.css rel=stylesheet><link href=https://svnscha.de/main.css media=screen rel=stylesheet><link href=https://svnscha.de/lightbox.css rel=stylesheet><body><div class=content><header><style>.avatar{vertical-align:middle;width:150px;height:150px;border-radius:50%}#wrapper{width:100%;clear:both;text-align:center}</style><div class=main><a href=https://svnscha.de title=svnscha>svnscha</a><div class=socials><a class=social href=https://www.linkedin.com/in/svnscha/ rel=me> <img alt=linkedin src=/social_icons/linkedin.svg> </a><a class=social href=https://github.com/svnscha/ rel=me> <img alt=github src=/social_icons/github.svg> </a></div></div><nav><a href=/about style=margin-left:.7em>/about</a><a href=/notes style=margin-left:.7em>/notes</a></nav><div id=wrapper><a href=https://svnscha.de title=svnscha> <img alt="svnscha - Profile Picture" class=avatar src=/svnscha.webp> </a></div></header><main><article><div class=title><h1 class=page-header>Moving to Fedora: Automating Discord Updates with Ansible</h1><div class=meta>Posted on <time>2024-11-15</time></div></div><section class=body><h2 id=why-you-ask>Why, You Ask?</h2><p>So, you've found yourself running Fedora and decided to install Discord, huh? Great choice — Fedora is fantastic. But then you realize Discord's tarball updates are a hassle. Every week, it's the same story: download, extract, and pray you didn't miss a step. Tedious, right?<p>Fear not! This is where Ansible swoops in to save the day. Let's walk through a playbook that automates the entire process of installing and updating Discord on Fedora. Say goodbye to manual labor and hello to efficiency.<h2 id=step-1-understanding-the-process>Step 1: Understanding the Process</h2><p>Discord on Linux isn't as straightforward as we'd like. Flatpak is an option, but it can be slow with updates or cause compatibility issues. For those of us who prefer the direct tarball approach, we need a way to automate the mess. With Ansible, we can ensure Discord is always up-to-date with just one command. No more hunting for the latest download link or worrying about cleaning up old versions.<h2 id=step-2-the-playbook>Step 2: The Playbook</h2><p>Here's an Ansible playbook to make your life easier. It handles everything — downloading the tarball, extracting it to the proper location, and cleaning up afterward.<pre class=language-yml data-lang=yml style=background:#282c34;color:#abb2bf><code class=language-yml data-lang=yml><span>---
</span><span>- </span><span style=color:#e06c75>name</span><span>: </span><span style=color:#98c379>Install and Update Discord on Fedora 41 using Ansible
</span><span>  </span><span style=color:#e06c75>hosts</span><span>: </span><span style=color:#98c379>localhost
</span><span>  </span><span style=color:#e06c75>become</span><span>: </span><span style=color:#d19a66>true
</span><span>  </span><span style=color:#e06c75>tasks</span><span>:
</span><span>    - </span><span style=color:#e06c75>name</span><span>: </span><span style=color:#98c379>Ensure /usr/share/discord is removed if it exists
</span><span>      </span><span style=color:#e06c75>file</span><span>:
</span><span>        </span><span style=color:#e06c75>path</span><span>: </span><span style=color:#98c379>/usr/share/discord
</span><span>        </span><span style=color:#e06c75>state</span><span>: </span><span style=color:#98c379>absent
</span><span>
</span><span>    - </span><span style=color:#e06c75>name</span><span>: </span><span style=color:#98c379>Download Discord tarball
</span><span>      </span><span style=color:#e06c75>get_url</span><span>:
</span><span>        </span><span style=color:#e06c75>url</span><span>: </span><span style=color:#98c379>"https://discord.com/api/download/stable?platform=linux&format=tar.gz"
</span><span>        </span><span style=color:#e06c75>dest</span><span>: </span><span style=color:#98c379>"/tmp/discord.tar.gz"
</span><span>        </span><span style=color:#e06c75>mode</span><span>: </span><span style=color:#98c379>"0644"
</span><span>
</span><span>    - </span><span style=color:#e06c75>name</span><span>: </span><span style=color:#98c379>Create /usr/share/discord directory
</span><span>      </span><span style=color:#e06c75>file</span><span>:
</span><span>        </span><span style=color:#e06c75>path</span><span>: </span><span style=color:#98c379>/usr/share/discord
</span><span>        </span><span style=color:#e06c75>state</span><span>: </span><span style=color:#98c379>directory
</span><span>        </span><span style=color:#e06c75>mode</span><span>: </span><span style=color:#98c379>"0755"
</span><span>
</span><span>    - </span><span style=color:#e06c75>name</span><span>: </span><span style=color:#98c379>Extract Discord tarball to /usr/share/discord
</span><span>      </span><span style=color:#e06c75>unarchive</span><span>:
</span><span>        </span><span style=color:#e06c75>src</span><span>: </span><span style=color:#98c379>"/tmp/discord.tar.gz"
</span><span>        </span><span style=color:#e06c75>dest</span><span>: </span><span style=color:#98c379>"/usr/share/discord/"
</span><span>        </span><span style=color:#e06c75>remote_src</span><span>: </span><span style=color:#d19a66>true
</span><span>        </span><span style=color:#e06c75>extra_opts</span><span>: [</span><span style=color:#98c379>"--strip-components=1"</span><span>]
</span><span>      </span><span style=color:#e06c75>args</span><span>:
</span><span>        </span><span style=color:#e06c75>creates</span><span>: </span><span style=color:#98c379>"/usr/share/discord/discord"
</span><span>
</span><span>    - </span><span style=color:#e06c75>name</span><span>: </span><span style=color:#98c379>Clean up temporary files
</span><span>      </span><span style=color:#e06c75>file</span><span>:
</span><span>        </span><span style=color:#e06c75>path</span><span>: </span><span style=color:#98c379>"/tmp/discord.tar.gz"
</span><span>        </span><span style=color:#e06c75>state</span><span>: </span><span style=color:#98c379>absent
</span></code></pre><h2 id=step-3-what-this-playbook-does>Step 3: What This Playbook Does</h2><ul><li>Step 1: If Discord is already installed, it removes the existing files to prevent conflicts.<li>Step 2: It downloads the latest stable Discord tarball directly from the official API.<li>Step 3: Creates the required directory at <code>/usr/share/discord</code>.<li>Step 4: Extracts the tarball into <code>/usr/share/discord</code>, stripping unnecessary folder components.<li>Step 5: Cleans up temporary files, leaving your system tidy.</ul><h2 id=a-note-about-bash-aliases>A Note About Bash Aliases</h2><p>If you're like me and love shortcuts, consider adding a bash alias to streamline running the playbook. This way, updating Discord becomes as simple as typing a single command. Here's how you can set it up:<pre class=language-bash data-lang=bash style=background:#282c34;color:#abb2bf><code class=language-bash data-lang=bash><span style=color:#e06c75>cat ~</span><span>/.bashrc.d/alias.sh
</span><span style=color:#56b6c2>alias </span><span style=color:#61afef>ansible-venv</span><span>=</span><span style=color:#98c379>". ~/repos/ansible/.venv/bin/activate"
</span><span style=color:#56b6c2>alias </span><span style=color:#61afef>update-discord</span><span>=</span><span style=color:#98c379>"ansible-venv && ansible-playbook ~/repos/ansible/update-discord.yml --connection=local -K"
</span></code></pre><p>With this in place:<ul><li><code>ansible-venv</code> activates your virtual environment for Ansible.<li><code>update-discord</code> runs the playbook with local connection and prompts for sudo permissions when needed.</ul><p>Now, keeping Discord updated is literally a one-liner. Perfect, right?<h2 id=wrapping-up>Wrapping Up</h2><p>With this playbook, you're one command away from keeping Discord updated effortlessly. Whether you're installing it for the first time or just keeping up with their relentless update schedule, this playbook has you covered.<p>So, go ahead — run it, relax, and enjoy Fedora without the hassle. Because let's face it: managing updates manually is so last year.</section></article></main><hr><center><small>Copyright © 2025 Sven Scharmentke. All rights reserved.</small></center></div><script src=https://svnscha.de/lightbox.js></script>